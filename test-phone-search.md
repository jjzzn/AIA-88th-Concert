# Phone Search Debug Guide

## วิธีทดสอบและแก้ไขปัญหาการค้นหาเบอร์โทร

### ขั้นตอนที่ 1: ทดสอบการจอง
1. จองที่นั่งใหม่ด้วยเบอร์โทร เช่น `0947064424`
2. เปิด Console (F12 → Console)
3. ดูข้อความ:
   ```
   bookingService.createBooking - Saving phone: 0947064424
   bookingService.createBooking - Booking created with phone: 0947064424
   ```
4. **บันทึกเบอร์ที่แสดงใน Console**

### ขั้นตอนที่ 2: ทดสอบการค้นหา
1. กดปุ่ม "ตั๋วของฉัน"
2. กรอกเบอร์โทรที่ใช้จอง
3. ดู Console:
   ```
   TicketRetrievalModal - Searching for phone: 0947064424
   Searching for phone variants: ["0947064424", "947064424"]
   Found bookings: 1 (หรือ 0 ถ้าไม่เจอ)
   ```

### ขั้นตอนที่ 3: ตรวจสอบใน Supabase
1. เปิด Supabase Dashboard
2. ไปที่ Table Editor → `bookings`
3. ดูคอลัมน์ `phone` ว่าเก็บในรูปแบบใด
4. ตัวอย่าง:
   - `0947064424` (มี 0 นำหน้า)
   - `947064424` (ไม่มี 0 นำหน้า)
   - `+66947064424` (มีรหัสประเทศ)

### ขั้นตอนที่ 4: ทดสอบ Query โดยตรงใน Supabase
ใน SQL Editor ลอง:
```sql
-- ค้นหาด้วยเบอร์ที่จอง
SELECT * FROM bookings WHERE phone = '0947064424';

-- ค้นหาแบบ LIKE
SELECT * FROM bookings WHERE phone LIKE '%947064424%';

-- ดูเบอร์ทั้งหมดในระบบ
SELECT phone, created_at FROM bookings ORDER BY created_at DESC LIMIT 10;
```

### สาเหตุที่เป็นไปได้:

1. **เบอร์ในฐานข้อมูลมีรูปแบบต่าง** (เช่น มี/ไม่มี 0 นำหน้า)
2. **มีช่องว่างหรือตัวอักษรพิเศษ** ในเบอร์ที่บันทึก
3. **Query ไม่ครอบคลุมรูปแบบ** ที่บันทึกไว้

### วิธีแก้ไข:

ถ้าพบว่าเบอร์ในฐานข้อมูลมีรูปแบบพิเศษ ให้แจ้งรูปแบบที่พบ เช่น:
- "เบอร์ในฐานข้อมูลเป็น `947064424` (ไม่มี 0)"
- "เบอร์ในฐานข้อมูลเป็น `+66947064424` (มีรหัสประเทศ)"

จะได้แก้ไข code ให้รองรับรูปแบบนั้นๆ
